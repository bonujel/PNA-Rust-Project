# PingCAP Talent Plan - Rust å®è·µï¼šæ—¥å¿—ç»“æ„åŒ–é”®å€¼å­˜å‚¨

[PingCAP Talent Plan](https://github.com/pingcap/talent-plan) Rust è¯¾ç¨‹å®è·µé¡¹ç›®ï¼Œå®ç°äº†ä¸€ä¸ªåŸºäº Bitcask å­˜å‚¨æ¨¡å‹çš„æŒä¹…åŒ–é”®å€¼å­˜å‚¨å¼•æ“ã€‚

## é¡¹ç›®è¿›åº¦

| é˜¶æ®µ | çŠ¶æ€ | æè¿° |
|------|------|------|
| Project 1 | âœ… å®Œæˆ | å†…å­˜é”®å€¼å­˜å‚¨ + CLI æ¡†æ¶ |
| Project 2 | âœ… å®Œæˆ | æ—¥å¿—ç»“æ„åŒ–æ–‡ä»¶ I/O + å‹ç¼© |
| Project 3 | ğŸ”² å¾…å¼€å§‹ | åŒæ­¥å®¢æˆ·ç«¯-æœåŠ¡ç«¯ç½‘ç»œ |
| Project 4 | ğŸ”² å¾…å¼€å§‹ | å¹¶å‘ä¸å¹¶è¡Œ |
| Project 5 | ğŸ”² å¾…å¼€å§‹ | å¼‚æ­¥ I/O |

## é¡¹ç›®ç»“æ„

```
project/
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib.rs           # åº“å…¥å£ï¼Œæ¨¡å—å¯¼å‡º
â”‚   â”œâ”€â”€ error.rs         # è‡ªå®šä¹‰é”™è¯¯ç±»å‹ (thiserror)
â”‚   â”œâ”€â”€ kv.rs            # KvStore æ ¸å¿ƒå®ç° (Bitcask æ¨¡å‹)
â”‚   â””â”€â”€ bin/
â”‚       â””â”€â”€ kvs.rs       # CLI å·¥å…·
â””â”€â”€ tests/
    â””â”€â”€ tests.rs         # é›†æˆæµ‹è¯• (17 ä¸ª)
```

## æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  KvStore                     â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ In-Memoryâ”‚    â”‚   Log Files (*.log)    â”‚ â”‚
â”‚  â”‚  Index   â”‚â”€â”€â”€â–¶â”‚  Append-Only Writes    â”‚ â”‚
â”‚  â”‚ HashMap  â”‚    â”‚  Generation-Based      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚                    â”‚                â”‚
â”‚       â–¼                    â–¼                â”‚
â”‚  key â†’ (gen,         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    offset, len)      â”‚Compactionâ”‚           â”‚
â”‚                      â”‚ (>1MB)   â”‚           â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒæœºåˆ¶ï¼š**
- **è¿½åŠ å†™å…¥**ï¼šæ‰€æœ‰å†™æ“ä½œé¡ºåºè¿½åŠ åˆ°å½“å‰æ—¥å¿—æ–‡ä»¶
- **å†…å­˜ç´¢å¼•**ï¼šHashMap æ˜ å°„ key â†’ (generation, offset, length)
- **æ—¥å¿—å‹ç¼©**ï¼šå½“è¿‡æœŸæ•°æ®è¶…è¿‡ 1MB æ—¶ï¼Œé‡å†™æœ‰æ•ˆæ¡ç›®åˆ°æ–°æ–‡ä»¶
- **Generation ç¼–å·**ï¼šæ¯ä¸ªæ—¥å¿—æ–‡ä»¶æœ‰å”¯ä¸€çš„é€’å¢ç¼–å·

## æŠ€æœ¯æ ˆ

| ä¾èµ– | ç”¨é€” |
|------|------|
| `clap v4.5` (derive) | CLI å‚æ•°è§£æ |
| `serde` + `serde_json` | å‘½ä»¤åºåˆ—åŒ–/ååºåˆ—åŒ– |
| `thiserror v2.0` | å£°æ˜å¼é”™è¯¯ç±»å‹ |

## ä½¿ç”¨æ–¹æ³•

```bash
# è®¾ç½®é”®å€¼å¯¹
cargo run -- set mykey myvalue

# è·å–å€¼
cargo run -- get mykey

# åˆ é™¤é”®
cargo run -- rm mykey

# æŸ¥çœ‹ç‰ˆæœ¬
cargo run -- -V
```

## æ„å»ºä¸æµ‹è¯•

```bash
cargo build            # æ„å»º
cargo test             # è¿è¡Œå…¨éƒ¨ 17 ä¸ªæµ‹è¯•
cargo clippy --lib --bins -- -W clippy::pedantic  # ä¸¥æ ¼ lint (0 warnings)
cargo fmt --check      # æ ¼å¼æ£€æŸ¥
```

## ä»£ç è´¨é‡

- `#![deny(missing_docs)]` å¼ºåˆ¶æ–‡æ¡£è¦†ç›–
- `cargo clippy --pedantic` é›¶è­¦å‘Šï¼ˆåº“ä»£ç  + äºŒè¿›åˆ¶ï¼‰
- æ‰€æœ‰å…¬å…± API åŒ…å« `# Errors` æ–‡æ¡£æ®µ
- åº“ä»£ç æ—  `expect()` / `unwrap()` â€” å…¨éƒ¨ä½¿ç”¨ `?` é”™è¯¯ä¼ æ’­
- `thiserror` å£°æ˜å¼é”™è¯¯ç±»å‹ï¼ŒåŒ…å« 5 ä¸ªè¯­ä¹‰åŒ–å˜ä½“

## è®¸å¯è¯

MIT OR Apache-2.0
